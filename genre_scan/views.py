from django.shortcuts import render
from .predict_API import *

# Create your views here.

# story = 'Sree is an innocent and fun-loving IT employee from Chennai who lives with his parents. He has a crush on Sindhuja a beautiful and independent modern-day girl who works in the office opposite his. Sindhuja eventually joins Srees office and invites him to hang out with her at the club to which Sree happily agrees. At the club, he realises, Sindhu drinks alcohol, swears freely, and is a complete party girl. He discovers that Sindhu doesnt know her own birthday because only her mother knew it and her mother died when she was very young. Over time they become good friends and he falls in love with her. One day the duo gets stuck in an elevator and ends up kissing instinctively. Sindhuja brings Sree home and they have sex after which Sree confesses his love for Sindhuja. To his shock, she rejects him saying that they are only good friends and insists that she does not love him. She refers to their sex as a casual indulgence whereupon Sree leaves her house in complete disgust. Sindhuja constantly tries to pacify him and Sree finally gives in, agreeing to continue being friends with her and begin to hang out like before. At a party, Sindhu tries to get intimate with a drunk Sree but he gets upset and shouts at her for merely using him and criticizes her character. He also reveals to everyone that he had sex with Sindhuja, making her angry. Sindhu confesses that now she also loves Sree but is disheartened by his behavior and mindset, thus ending the party on an unpleasant note. Sree seeks the help of the local tailor Thangaraj and his colleague Satish and attempts to reconcile with Sindhuja. He joins the dance classes conducted by Sindhus father and eventually they patch up. As per Sindhus wish they decide to begin a life in relationship without the knowledge of Srees parents since they would clearly disapprove of the idea. Sree makes a plan for his daily routine, to keep his parents oblivious of his relationship and moves into a rented house near his home with Sindhu. While Sindhu starts becoming slightly aggressive, Sree continues to steer the boat of their relationship. One night, when Sindhu is moody and irksome, Sree takes her out and reveals to her that it is her birthday and tells her that he had traced it out after a lot of difficulty. Sindhu is extremely touched and her aggressiveness comes to an end. Sree constantly tries to talk Sindhu into agreeing to their marriage but she sternly refuses since she wants to achieve her dream of opening a restaurant in Los Angeles. Meanwhile, Srees mother is hell-bent on finding a good bride for him which puts Sree in a complete dilemma. Sindhus father invites the couple for his dance show but Srees mother falls sick and he comes in late for the show, making Sindhu upset. At the show, he pesters her about their marriage citing his mothers ill health as his imminent reason to soon marry. When Sindhu refuses to budge, he decides to break up with her for his mothers sake and to marry a girl, that his parents fix an alliance with. A day before his marriage, Sindhu turns up at his home to bid him goodbye before leaving Chennai. The two part each other with heavy hearts. On the day of his wedding, while Sindhus father is driving her to the airport he confesses about how he did not acknowledge Sindhus mothers love for him and how he regretted it after she died and asks Sindhu not to make the same mistake. Suddenly Sindhu realises she has to stop the marriage and rushes back to Srees wedding avenue only to realize that the wedding is over and she turns to leave in tears. Three years later Sindhu has opened her dream restaurant. She eventually learns that Sree is getting a divorce. Sindhus father visits Srees parents and tells about his daughters love for Sree, while Srees parents lament over his failed marriage. Srees wife had got an abortion, as revenge for an argument which Sree won. Srees mother accepts the fact that happily live-in relationships are better than unhappy marriages. Suddenly, Srees parents and Sindhus father realize that both of them have been missing for three days and wonder where they are. The film ends as Sree and Sindhu are seen having sex secretly as their parents call them. Their mindsets are shown to have reversed as Sree now wants a live-in relationship but Sindhu prefers marriage.'

# print(predict_main(story))


def homepage(request):
    if request.method == "GET":
        return render(request,"genre_scan/base.html")
    if request.method == "POST":
        story = request.POST["textbox"]
        result = predict_main(story)
        print("**"*25)

        return render(request,"genre_scan/result.html",{"results":result,"story":story})
